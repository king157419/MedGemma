# 项目申报书

## MedReport Bridge - 医疗报告解读助手

---

## 一、项目目标与应用场景

### 1.1 项目目标

开发一个基于 MoonBit 语言和 Google MedGemma 模型的医疗报告解读系统，帮助患者家属理解医疗检验报告中的专业术语和检查结果，降低医患沟通成本，提升医疗信息可及性。

### 1.2 应用场景

**场景一：门诊检验报告解读**
- 患者家属拿到血常规、肝功能、肾功能等检验报告
- 报告中充满专业术语和数值，家属难以理解
- 医生时间有限，无法详细解释每项指标
- 通过本系统，家属可快速获得通俗易懂的解读

**场景二：体检报告分析**
- 年度体检后收到厚厚的体检报告
- 各项指标异常标记，但缺乏详细解释
- 需要了解哪些指标需要关注，哪些可以忽略
- 系统提供整体健康评估和重点关注事项

**场景三：慢性病指标跟踪**
- 糖尿病、高血压等慢性病患者定期检查
- 需要跟踪血糖、血脂等指标变化趋势
- 系统帮助患者理解指标变化的意义

### 1.3 解决的痛点

| 痛点 | 现状 | 解决方案 |
|------|------|----------|
| 专业术语难懂 | 医学术语晦涩，普通人无法理解 | AI驱动的通俗化解释 |
| 医生时间有限 | 门诊时间短，无法详细解释 | 24小时在线解读服务 |
| 信息不对称 | 患者缺乏医学知识 | 提供背景知识和正常范围参考 |
| 焦虑情绪 | 异常指标引起不必要的恐慌 | 科学解读，提供合理建议 |

---

## 二、交付物说明

### 2.1 核心功能

| 功能模块 | 描述 | 优先级 |
|----------|------|--------|
| 报告解析 | 支持文本、PDF、图片格式输入 | P0 |
| AI解读 | 接入MedGemma模型进行专业分析 | P0 |
| 通俗化输出 | 将专业术语转换为易懂语言 | P0 |
| HTTP API | 提供RESTful API接口 | P1 |
| Web界面 | 简洁的用户交互界面 | P1 |

### 2.2 功能边界（Scope）

**包含功能：**
- 文本格式医疗报告的解析和解读
- 常见检验报告类型识别（血常规、肝功能、肾功能、血糖、血脂）
- 通俗易懂的健康解读输出
- 异常指标标注和建议

**不包含功能：**
- 医学影像诊断（X光、CT、MRI的深度分析）
- 处方开具和用药建议
- 实时医疗咨询
- 电子病历管理

### 2.3 预期使用方式

**命令行方式：**
```bash
# 解读文本报告
moon run cmd/main -- --input "report.txt"

# 启动API服务
moon run cmd/main -- --server --port 8080
```

**API调用方式：**
```bash
curl -X POST http://localhost:8080/api/analyze \
  -H "Content-Type: application/json" \
  -d '{"report": "血常规检验报告..."}'
```

### 2.4 测试规划

| 测试类型 | 覆盖范围 | 工具/方法 |
|----------|----------|-----------|
| 单元测试 | 各模块核心函数 | MoonBit内置测试框架 |
| 集成测试 | 模块间交互 | 端到端测试用例 |
| API测试 | HTTP接口 | curl/Postman |
| 性能测试 | 并发处理能力 | 压力测试工具 |

### 2.5 文档覆盖

- README.md：项目介绍和快速开始
- API文档：接口说明和示例
- 开发历程：记录开发过程和心得
- 用户指南：使用说明

---

## 三、技术路线

### 3.1 系统架构

```
┌─────────────────────────────────────────────────────────┐
│                    用户界面层                            │
│              (Web界面 / 命令行 / API)                    │
├─────────────────────────────────────────────────────────┤
│                    应用服务层                            │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐  │
│  │  报告解析器  │  │  AI服务网关  │  │  结果格式化器   │  │
│  └─────────────┘  └─────────────┘  └─────────────────┘  │
├─────────────────────────────────────────────────────────┤
│                    基础设施层                            │
│         MoonBit 异步运行时 + HTTP服务                    │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                    AI模型层                              │
│              MedGemma 4B/27B 模型服务                    │
└─────────────────────────────────────────────────────────┘
```

### 3.2 核心模块划分

| 模块 | 职责 | 关键技术 |
|------|------|----------|
| types | 类型定义 | MoonBit类型系统 |
| parser | 报告解析 | 文本处理、格式识别 |
| gateway | AI服务网关 | 异步HTTP、API集成 |
| formatter | 结果格式化 | 文本生成、模板渲染 |
| server | HTTP服务 | 异步网络编程 |

### 3.3 大模型与智能体工具的作用

**开发阶段：**
- 使用AI助手（如Claude、ChatGPT）辅助代码生成
- 利用大模型理解MoonBit语言特性和最佳实践
- AI辅助编写测试用例和文档

**运行阶段：**
- MedGemma模型提供医疗报告解读能力
- 模型负责将专业术语转换为通俗语言
- 结合模型输出进行结果格式化

### 3.4 关键技术选型

| 技术 | 选型 | 理由 |
|------|------|------|
| 核心语言 | MoonBit | 比赛要求，异步支持优秀 |
| AI模型 | MedGemma | 开源医疗专用模型，支持多模态 |
| 模型部署 | vLLM/本地 | 灵活部署，成本可控 |
| 异步框架 | MoonBit async | 结构化并发，性能优异 |

---

## 四、风险分析与应对方案

### 4.1 技术风险

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|----------|
| MedGemma非临床级别 | 高 | 中 | 明确标注"仅供参考"，不作为诊断依据 |
| MoonBit生态不完善 | 中 | 中 | 参考官方示例，必要时贡献代码 |
| HTTP库功能不足 | 中 | 高 | 使用底层socket API，或等待官方更新 |
| 模型部署成本高 | 中 | 中 | 支持云端API和本地部署两种模式 |

### 4.2 工程风险

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|----------|
| 开发周期紧张 | 中 | 高 | 采用增量开发，优先核心功能 |
| 测试覆盖不足 | 中 | 中 | 编写自动化测试，持续集成 |
| 文档不完善 | 低 | 低 | 同步更新文档，记录开发过程 |

### 4.3 缓解措施

1. **增量开发**：按照features.json逐步实现功能
2. **持续集成**：每次commit前运行测试
3. **文档同步**：开发过程中同步更新文档
4. **备用方案**：准备多种模型部署方案

---

## 五、相关研究与实践基础

### 5.1 医疗AI领域

**MedGemma模型**
- Google于2025年5月发布的开源医疗AI模型
- 基于Gemma 3架构，提供4B多模态和27B文本两个版本
- 在多项医疗基准测试中表现优异
- 支持医学图像理解和临床文本推理

**医疗报告解读现状**
- 传统方式依赖医生人工解释
- 现有AI工具多为通用模型，缺乏医疗专业性
- MedGemma填补了开源医疗AI的空白

### 5.2 MoonBit语言

**语言特性**
- 现代化的类型系统和模式匹配
- 优秀的异步编程支持（结构化并发）
- 高性能编译输出（WASM/Native）
- 快速编译和增量构建

**异步编程优势**
- 无需await的简洁语法
- 结构化并发设计，自动错误处理
- 性能优于Node.js和Go（单线程场景）

### 5.3 参考项目

| 项目 | 借鉴点 |
|------|--------|
| fastcc | MoonBit项目结构参考 |
| wasmoon | AI辅助开发流程参考 |
| Anthropic Agent框架 | 长时开发进度管理方法 |

---

## 六、个人背景与项目匹配度

### 6.1 技术背景

- 熟悉函数式编程和类型系统
- 具备AI应用开发经验
- 了解医疗信息化领域

### 6.2 项目匹配

- 对MoonBit新语言有学习热情
- 关注AI在医疗领域的应用
- 希望通过比赛提升工程能力

---

## 七、补充材料

### 7.1 项目仓库

- GitHub: https://github.com/king157419/MedGemma

### 7.2 开发计划

| 阶段 | 时间 | 目标 |
|------|------|------|
| 初始化 | 第1周 | 项目搭建、申报书提交 |
| 核心开发 | 第2-4周 | 解析器、网关、格式化器 |
| AI集成 | 第5-6周 | MedGemma集成、API开发 |
| 测试优化 | 第7-8周 | 测试、文档、性能优化 |

### 7.3 预期成果

- 完整的MoonBit医疗报告解读系统
- 100+ commits的开发历史
- 完善的测试和文档
- 可演示的端到端功能
